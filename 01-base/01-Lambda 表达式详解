





ğŸš€ ä»€ä¹ˆæ˜¯ Lambda è¡¨è¾¾å¼ï¼Ÿ
Lambda æ˜¯ C++11 å¼•å…¥çš„ä¸€ç§è½»é‡å‡½æ•°å¯¹è±¡è¯­æ³•ï¼Œå¯ä»¥åƒå‡½æ•°ä¸€æ ·ä½¿ç”¨ï¼Œä¹Ÿèƒ½ä½œä¸ºå‚æ•°ä¼ é€’ã€‚

å®ƒè®©ä½ åœ¨éœ€è¦ä¸´æ—¶å‡½æ•°çš„åœ°æ–¹ï¼Œä¸ç”¨å†é¢å¤–å†™å‡½æ•°åæˆ–ç±»ã€‚


ğŸ”§ åŸºæœ¬è¯­æ³•
[æ•è·åˆ—è¡¨](å‚æ•°åˆ—è¡¨) -> è¿”å›ç±»å‹ {
    å‡½æ•°ä½“
};
å¦‚æœè¿”å›ç±»å‹èƒ½æ¨å¯¼ï¼Œå¯ä»¥çœç•¥ -> è¿”å›ç±»å‹ã€‚å‚æ•°ä¹Ÿå¯ä»¥çœç•¥ã€‚



âœ… ç¤ºä¾‹ï¼šæœ€å° lambda
auto f = [] { std::cout << "Hello Lambda\n"; };
f();  // è°ƒç”¨


ğŸ§  æ•è·åˆ—è¡¨è¯¦è§£
æ•è·æ–¹å¼ | ç¤ºä¾‹ | å«ä¹‰
------------|------|-----
[] | ä¸æ•è·ä»»ä½•å˜é‡
[=] | æŒ‰å€¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼ˆæ‹·è´ï¼‰
[&] | æŒ‰å¼•ç”¨æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼ˆå¯ä¿®æ”¹å¤–éƒ¨ï¼‰
[x] | æŒ‰å€¼æ•è· x
[&x] | æŒ‰å¼•ç”¨æ•è· x
[=, &y] | é»˜è®¤æŒ‰å€¼æ•è·ï¼Œä½† y ä¾‹å¤–æŒ‰å¼•ç”¨
[this] | æ•è·å½“å‰ç±»çš„ this æŒ‡é’ˆï¼ˆè®¿é—®æˆå‘˜å˜é‡ï¼‰

ï¼šä½¿ç”¨å˜é‡
int a = 10, b = 20;

auto sum = [=]() { return a + b; };   // æ•è· a å’Œ b çš„å‰¯æœ¬
auto mod = [&]() { b -= a; };         // æ•è·å¼•ç”¨ï¼Œä¿®æ”¹ b
auto mix = [=, &b]() { b += a; };     // a æ‹·è´ï¼Œb å¼•ç”¨


ğŸ§ª ç¤ºä¾‹ï¼šä¼ å…¥å‚æ•°
auto add = [](int x, int y) -> int {
    return x + y;
};

int result = add(3, 4);  // 7


â›“ ç”¨æ³•ï¼šä¸ std::function é…åˆ
#include <functional>

std::function<int(int)> square = [](int x) { return x * x; };



â± ç”¨æ³•ï¼šä¸çº¿ç¨‹æˆ–å¼‚æ­¥æ­é…
std::thread t([] {
    std::cout << "Running in thread\n";
});
t.join();


ğŸ”‚ ç”¨æ³•ï¼šstd::for_each / ç®—æ³•
std::vector<int> v = {1, 2, 3};
std::for_each(v.begin(), v.end(), [](int x) {
    std::cout << x << " ";
});


âœ¨ é«˜çº§ï¼šå¯å˜ lambdaï¼ˆmutableï¼‰
é»˜è®¤ lambda æ•è·æŒ‰å€¼æ—¶ä¸å…è®¸ä¿®æ”¹è¢«æ•è·å˜é‡çš„å‰¯æœ¬ï¼Œmutable å…è®¸è¿™ä¹ˆåšï¼š

int x = 5;
auto f = [=]() mutable { x += 10; std::cout << x; };
f(); // è¾“å‡º 15
std::cout << x; // è¾“å‡ºè¿˜æ˜¯ 5ï¼Œè¯´æ˜ä¿®æ”¹çš„æ˜¯å‰¯æœ¬


ğŸ§© é«˜çº§ï¼šé€’å½’ lambdaï¼ˆC++14 èµ·ï¼‰
std::function<int(int)> fib = [&](int n) {
    return n <= 1 ? n : fib(n - 1) + fib(n - 2);
};


ğŸ§¹ Lambda æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ
å®ƒæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ç”Ÿæˆçš„åŒ¿åç±»å¯¹è±¡ï¼Œé‡è½½äº† operator()ï¼Œæ‰€ä»¥å¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨ã€‚



ğŸ”š æ€»ç»“
| ç‰¹ç‚¹     | æ˜¯å¦æ”¯æŒ          |
| ------ | ------------- |
| æ•è·å˜é‡   | âœ… æ”¯æŒå„ç§æ–¹å¼      |
| ä¼ å‚     | âœ… å¯å¸¦ä»»æ„å‚æ•°      |
| è¿”å›ç±»å‹   | âœ… å¯è‡ªåŠ¨æ¨å¯¼æˆ–æŒ‡å®š    |
| ä¸æ ‡å‡†åº“å…¼å®¹ | âœ… å®Œç¾æ”¯æŒ        |
| å¤šçº¿ç¨‹æ”¯æŒ  | âœ… å¯ä¼ å…¥çº¿ç¨‹ã€å¼‚æ­¥ä»»åŠ¡  |
| ç±»æˆå‘˜è®¿é—®  | âœ… æ”¯æŒ `[this]` |
